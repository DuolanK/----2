local npc = script.Parent
local humanoid = npc:FindFirstChildOfClass("Humanoid") -- Получаем Humanoid NPC
local attackDistance = 20 -- Расстояние, на котором NPC будет атаковать
local attackDamage = 10 -- Урон от атаки NPC
local attackCooldown = 2 -- Время перезарядки атаки

-- Функция для поиска ближайшего игрока
function getNearestPlayer()
    local nearestPlayer = nil
    local shortestDistance = attackDistance
    for _, player in pairs(game.Players:GetPlayers()) do
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local playerDistance = (npc.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
            if playerDistance < shortestDistance then
                nearestPlayer = player
                shortestDistance = playerDistance
            end
        end
    end
    return nearestPlayer
end

-- Функция атаки NPC
function attackPlayer(player)
    if player.Character and player.Character:FindFirstChildOfClass("Humanoid") then
        local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid:TakeDamage(attackDamage)
        end
    end
end

-- Основной цикл поведения NPC
while true do
    local player = getNearestPlayer() -- Ищем ближайшего игрока
    if player then
        -- Если игрок найден в радиусе, атакуем его
        attackPlayer(player)
    end
    wait(attackCooldown) -- Ожидаем перед следующей атакой
end
